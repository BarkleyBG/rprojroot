---
title: "Project roots"
author: "Kirill MÃ¼ller"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

This package solves a trivial but annoying problem that occurs sooner or later
in any project that is large enough to be spread over subdirectories.
Relative file paths are almost always preferable to absolute paths,
but relative to what?
Unfortunately, we cannot always be sure about the value of the working directory:
For instance, in RStudio,
sometimes it's the project root (when running R scripts),
sometimes a subdirectory (when building vignettes),
sometimes again the project root (when executing chunks of a vignette):

```{r}
basename(getwd())
```

If we could only get hold of our...


## Project root

The *root* of a project is defined as a directory that contains a regular file
whose name matches a given pattern and which optionally contains a given text.
Thus, the following method reliably finds our project root:

- Start the search in any subdirectory of our project
- Proceeding up the directory hierarchy until finding a file that matches
the criteria

The Git version control system (and probably many other tools) use a similar
approach: A Git command can be executed from within any subdirectory of a
repository.


## A simple example

```{r}
library(rprojroot)
basename(find_root("DESCRIPTION"))
file.exists(find_root_file("DESCRIPTION", "R", "root.R"))
```

